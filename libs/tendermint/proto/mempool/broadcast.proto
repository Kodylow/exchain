
syntax = "proto3";

option go_package = "libs/tendermint/proto/mempool";

import "google/protobuf/empty.proto";

package mempool;

service MempoolTxReceiver {
  rpc TxIndices(IndicesRequest) returns(IndicesResponse) {}
  rpc CheckTxs (stream TxsRequest) returns(google.protobuf.Empty) {}
  rpc CacheSentryTxs (stream SentryTxs) returns(google.protobuf.Empty) {}
}

message TxsRequest {
  repeated bytes txs = 1;
  uint32 peer_id = 2;
}

message SentryTxs {
  repeated SentryTx txs = 1;
}

message SentryTx {
  bytes tx = 1;
  string from = 2;
  uint32 txIndex = 3;
}

message IndicesRequest {
  int64 MaxBytes = 1;
  int64 MaxGas = 2;
}

message IndicesResponse {
  repeated uint32 indices = 1;
}

message ReceiverInfo {
  uint32 your_id = 1;
  int64 port = 2;
}
