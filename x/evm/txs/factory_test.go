package txs

import (
	"context"
	"fmt"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/common/hexutil"
	ethtypes "github.com/ethereum/go-ethereum/core/types"
	"github.com/ethereum/go-ethereum/crypto"
	"github.com/ethereum/go-ethereum/ethclient"
	sdk "github.com/okex/exchain/libs/cosmos-sdk/types"
	"github.com/okex/exchain/x/evm/txs/base"
	"github.com/okex/exchain/x/evm/txs/check"
	"github.com/okex/exchain/x/evm/txs/deliver"
	"github.com/okex/exchain/x/evm/txs/tracetxlog"
	"math/big"
	"reflect"
	"testing"
	"time"
)

func Test_factory_CreateTx(t *testing.T) {
	type fields struct {
		Config base.Config
	}
	traceTxConfig := base.Config{Keeper: &base.Keeper{}, Ctx: sdk.Context{}.WithIsTraceTxLog(true)}
	checkTxConfig := base.Config{Keeper: &base.Keeper{}, Ctx: sdk.Context{}.WithIsCheckTx(true)}
	deliverTxConfig := base.Config{Keeper: &base.Keeper{}, Ctx: sdk.Context{}}
	tests := []struct {
		name    string
		fields  fields
		want    Tx
		wantErr bool
	}{
		{"1. factory keeper is nil", fields{Config: base.Config{Keeper: nil, Ctx: sdk.Context{}}}, nil, true},
		{"2. create trace tx log", fields{Config: traceTxConfig}, tracetxlog.NewTx(traceTxConfig), false},
		{"3. create check tx log", fields{Config: checkTxConfig}, check.NewTx(checkTxConfig), false},
		{"4. create deliver(default) tx log", fields{Config: deliverTxConfig}, deliver.NewTx(deliverTxConfig), false},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			factory := NewFactory(tt.fields.Config)
			got, err := factory.CreateTx()
			if (err != nil) != tt.wantErr {
				t.Errorf("CreateTx() error = %v, wantErr %v", err, tt.wantErr)
				return
			}
			if !reflect.DeepEqual(got, tt.want) {
				t.Errorf("CreateTx() got = %v, want %v", got, tt.want)
			}
		})
	}
}

func TestAsd(t *testing.T) {
	c, err := ethclient.Dial("http://localhost:8545")
	if err != nil {
		panic(err)
	}
	code, err := c.CodeAt(context.Background(), common.HexToAddress("0x45dD91b0289E60D89Cec94dF0Aac3a2f539c514a"), nil)
	fmt.Println("xen len(code)", len(code), err)
	code, err = c.CodeAt(context.Background(), common.HexToAddress("0x9a59ae3Fc0948717F94242fc170ac1d5dB3f0D5D"), nil)
	fmt.Println("cointool len(code)", len(code), err)
	time.Sleep(10000 * time.Second)

	signer := ethtypes.NewEIP155Signer(new(big.Int).SetInt64(67))
	privKey, err := crypto.HexToECDSA("8ff3ca2d9985c3a52b459e2f6e7822b23e1af845961e22128d5f372fb9aa5f17")
	if err != nil {
		panic(err)
	}
	sleepTime := 6 * time.Second

	payLoad, err := hexutil.Decode("0x60a060405260016005553480156200001657600080fd5b506040518060400160405280600a81526020017f58454e2043727970746f000000000000000000000000000000000000000000008152506040518060400160405280600381526020017f58454e0000000000000000000000000000000000000000000000000000000000815250816003908162000094919062000331565b508060049081620000a6919062000331565b505050426080818152505062000418565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200013957607f821691505b6020821081036200014f576200014e620000f1565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620001b97fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200017a565b620001c586836200017a565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620002126200020c6200020684620001dd565b620001e7565b620001dd565b9050919050565b6000819050919050565b6200022e83620001f1565b620002466200023d8262000219565b84845462000187565b825550505050565b600090565b6200025d6200024e565b6200026a81848462000223565b505050565b5b8181101562000292576200028660008262000253565b60018101905062000270565b5050565b601f821115620002e157620002ab8162000155565b620002b6846200016a565b81016020851015620002c6578190505b620002de620002d5856200016a565b8301826200026f565b50505b505050565b600082821c905092915050565b60006200030660001984600802620002e6565b1980831691505092915050565b6000620003218383620002f3565b9150826002028217905092915050565b6200033c82620000b7565b67ffffffffffffffff811115620003585762000357620000c2565b5b62000364825462000120565b6200037182828562000296565b600060209050601f831160018114620003a9576000841562000394578287015190505b620003a0858262000313565b86555062000410565b601f198416620003b98662000155565b60005b82811015620003e357848901518255600182019150602085019450602081019050620003bc565b86831015620004035784890151620003ff601f891682620002f3565b8355505b6001600288020188555050505b505050505050565b608051614ce262000442600039600081816124510152818161311f015261318f0152614ce26000f3fe608060405234801561001057600080fd5b50600436106103425760003560e01c80637e7aa62e116101b8578063b4800cdc11610104578063df282331116100a2578063ed2f23691161007c578063ed2f2369146109bf578063f0604829146109dd578063f340faed146109fb578063fed7426914610a1957610342565b8063df2823311461094e578063e3af6d0a14610983578063e81917b4146109a157610342565b8063c0c65259116100de578063c0c65259146108b2578063c56f0bab146108d0578063ce653d5f146108ee578063dd62ed3e1461091e57610342565b8063b4800cdc14610858578063ba3ec74114610876578063bcfe394f1461089457610342565b80639920245411610171578063a457c2d71161014b578063a457c2d7146107aa578063a9059cbb146107da578063b0fd1fc21461080a578063b21d35f21461083a57610342565b806399202454146107545780639dc29fac146107725780639ff054df1461078e57610342565b80637e7aa62e1461068b5780638979c87c146106a95780638da7ad23146106c7578063909a2ff6146106fa57806395d89b4114610718578063962ca4961461073657610342565b80632a62d96611610292578063543d3652116102305780637010d7a11161020a5780637010d7a11461060357806370a082311461062157806372475f94146106515780637b0472f01461066f57610342565b8063543d3652146105ab5780635bccb4c4146105c957806361a52a36146105e557610342565b8063395093511161026c57806339509351146105495780633ccfd60b14610579578063451257151461058357806352c7f8dc146105a157610342565b80632a62d966146104ef578063313ce5671461050d57806332870fda1461052b57610342565b8063110d7fc2116102ff5780631c244082116102d95780631c244082146104675780631c560305146104855780631c6f212e146104a157806323b872dd146104bf57610342565b8063110d7fc21461040d57806316f9c8fd1461042b57806318160ddd1461044957610342565b80630237893214610347578063069612a51461036557806306fdde0314610383578063095ea7b3146103a15780630bfae56b146103d15780630f2e1228146103ef575b600080fd5b61034f610a37565b60405161035c919061363e565b60405180910390f35b61036d610a3d565b60405161037a919061363e565b60405180910390f35b61038b610a43565b60405161039891906136e9565b60405180910390f35b6103bb60048036038101906103b6919061379a565b610ad5565b6040516103c891906137f5565b60405180910390f35b6103d9610af8565b6040516103e6919061363e565b60405180910390f35b6103f7610b09565b604051610404919061363e565b60405180910390f35b610415610b0e565b604051610422919061363e565b60405180910390f35b610433610b13565b6040516104409190613874565b60405180910390f35b610451610b99565b60405161045e919061363e565b60405180910390f35b61046f610ba3565b60405161047c919061363e565b60405180910390f35b61049f600480360381019061049a919061379a565b610ba9565b005b6104a9610eec565b6040516104b6919061363e565b60405180910390f35b6104d960048036038101906104d4919061388f565b610ef1565b6040516104e691906137f5565b60405180910390f35b6104f7610f20565b604051610504919061363e565b60405180910390f35b610515610f25565b60405161052291906138fe565b60405180910390f35b610533610f2e565b604051610540919061363e565b60405180910390f35b610563600480360381019061055e919061379a565b610f33565b60405161057091906137f5565b60405180910390f35b610581610f6a565b005b61058b61116b565b604051610598919061363e565b60405180910390f35b6105a961117a565b005b6105b361138e565b6040516105c0919061363e565b60405180910390f35b6105e360048036038101906105de9190613919565b611393565b005b6105ed611819565b6040516105fa919061363e565b60405180910390f35b61060b61181e565b60405161061891906139e3565b60405180910390f35b61063b600480360381019061063691906139fe565b611904565b604051610648919061363e565b60405180910390f35b61065961194c565b604051610666919061363e565b60405180910390f35b61068960048036038101906106849190613919565b611951565b005b610693611bb7565b6040516106a0919061363e565b60405180910390f35b6106b1611bbc565b6040516106be919061363e565b60405180910390f35b6106e160048036038101906106dc91906139fe565b611bcb565b6040516106f19493929190613a2b565b60405180910390f35b610702611bfb565b60405161070f919061363e565b60405180910390f35b610720611c00565b60405161072d91906136e9565b60405180910390f35b61073e611c92565b60405161074b919061363e565b60405180910390f35b61075c611ca1565b604051610769919061363e565b60405180910390f35b61078c6004803603810190610787919061379a565b611cb0565b005b6107a860048036038101906107a39190613a70565b611ebd565b005b6107c460048036038101906107bf919061379a565b6121c0565b6040516107d191906137f5565b60405180910390f35b6107f460048036038101906107ef919061379a565b612237565b60405161080191906137f5565b60405180910390f35b610824600480360381019061081f9190613a9d565b61225a565b604051610831919061363e565b60405180910390f35b610842612310565b60405161084f919061363e565b60405180910390f35b610860612316565b60405161086d919061363e565b60405180910390f35b61087e61231c565b60405161088b91906136e9565b60405180910390f35b61089c612338565b6040516108a9919061363e565b60405180910390f35b6108ba61233d565b6040516108c7919061363e565b60405180910390f35b6108d861234f565b6040516108e5919061363e565b60405180910390f35b610908600480360381019061090391906139fe565b612354565b604051610915919061363e565b60405180910390f35b61093860048036038101906109339190613b04565b61236c565b604051610945919061363e565b60405180910390f35b610968600480360381019061096391906139fe565b6123f3565b60405161097a96959493929190613b53565b60405180910390f35b61098b61244f565b604051610998919061363e565b60405180910390f35b6109a9612473565b6040516109b6919061363e565b60405180910390f35b6109c7612479565b6040516109d4919061363e565b60405180910390f35b6109e561247f565b6040516109f2919061363e565b60405180910390f35b610a0361249c565b604051610a10919061363e565b60405180910390f35b610a216124a3565b604051610a2e919061363e565b60405180910390f35b61016d81565b60085481565b606060038054610a5290613be3565b80601f0160208091040260200160405190810160405280929190818152602001828054610a7e90613be3565b8015610acb5780601f10610aa057610100808354040283529160200191610acb565b820191906000526020600020905b815481529060010190602001808311610aae57829003601f168201915b5050505050905090565b600080610ae06124a8565b9050610aed8185856124b0565b600191505092915050565b60186064610b069190613c43565b81565b606381565b600081565b610b1b6135b1565b600a6000610b276124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020604051806080016040529081600082015481526020016001820154815260200160028201548152602001600382015481525050905090565b6000600254905090565b60055481565b600060096000610bb76124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820154815260200160038201548152602001600482015481526020016005820154815250509050600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610cf5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cec90613cf7565b60405180910390fd5b60008211610d38576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d2f90613d63565b60405180910390fd5b60658210610d7b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7290613dcf565b60405180910390fd5b6000816060015111610dc2576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610db990613e3b565b60405180910390fd5b80604001514211610e08576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dff90613ea7565b60405180910390fd5b6000670de0b6b3a7640000610e3483606001518460200151856040015186608001518760a00151612679565b610e3e9190613c43565b9050600060648483610e509190613c43565b610e5a9190613ef6565b905060008183610e6a9190613f27565b9050610e7d610e776124a8565b82612779565b610e878683612779565b610e8f6128cf565b610e976124a8565b73ffffffffffffffffffffffffffffffffffffffff167fd74752b13281df13701575f3a507e9b1242e0b5fb040143211c481c1fce573a684604051610edc919061363e565b60405180910390a2505050505050565b600181565b600080610efc6124a8565b9050610f09858285612981565b610f14858585612a0d565b60019150509392505050565b600081565b60006012905090565b605a81565b600080610f3e6124a8565b9050610f5f818585610f50858961236c565b610f5a9190613f5b565b6124b0565b600191505092915050565b6000600a6000610f786124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060800160405290816000820154815260200160018201548152602001600282015481526020016003820154815250509050600081604001511161102e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161102590613fdb565b60405180910390fd5b600061104c8260400151836000015184602001518560600151612c83565b90506007600081548092919061106190613ffb565b919050555081604001516008600082825461107c9190613f27565b925050819055506110a361108e6124a8565b82846040015161109e9190613f5b565b612779565b6110ab6124a8565b73ffffffffffffffffffffffffffffffffffffffff167f92ccf450a286a957af52509bc1c9939d1a6a481783e142e41e2499f0bb66ebc68360400151836040516110f6929190614024565b60405180910390a2600a600061110a6124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008082016000905560018201600090556002820160009055600382016000905550505050565b6000611175612ce8565b905090565b6000600960006111886124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820154815260200160038201548152602001600482015481526020016005820154815250509050600081606001511161129e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161129590613e3b565b60405180910390fd5b806040015142116112e4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112db90613ea7565b60405180910390fd5b6000670de0b6b3a764000061131083606001518460200151856040015186608001518760a00151612679565b61131a9190613c43565b905061132d6113276124a8565b82612779565b6113356128cf565b61133d6124a8565b73ffffffffffffffffffffffffffffffffffffffff167fd74752b13281df13701575f3a507e9b1242e0b5fb040143211c481c1fce573a682604051611382919061363e565b60405180910390a25050565b600181565b6000600960006113a16124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820154815260200160038201548152602001600482015481526020016005820154815250509050606583106114b3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114aa90614099565b60405180910390fd5b60008160600151116114fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114f190613e3b565b60405180910390fd5b80604001514211611540576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161153790613ea7565b60405180910390fd5b6000670de0b6b3a764000061156c83606001518460200151856040015186608001518760a00151612679565b6115769190613c43565b90506000606485836115889190613c43565b6115929190613ef6565b9050600081836115a29190613f27565b90506115b56115af6124a8565b82612779565b6115bd6128cf565b6115c56124a8565b73ffffffffffffffffffffffffffffffffffffffff167fd74752b13281df13701575f3a507e9b1242e0b5fb040143211c481c1fce573a68460405161160a919061363e565b60405180910390a260008211611655576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161164c90614105565b60405180910390fd5b6001601860016116659190613c43565b61166f9190613f27565b60188661167c9190613c43565b116116bc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116b390614171565b60405180910390fd5b600160186103e86116cd9190613c43565b6116d79190613f5b565b6018866116e49190613c43565b10611724576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161171b906141dd565b60405180910390fd5b6000600a60006117326124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020154146117b0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016117a790614249565b60405180910390fd5b6117ba8286612e11565b6117c26124a8565b73ffffffffffffffffffffffffffffffffffffffff167f1449c6dd7851abc30abf37f57715f492010519147cc2652fbc38202c18a6ee908387604051611809929190614024565b60405180910390a2505050505050565b601881565b6118266135d9565b600960006118326124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201548152602001600282015481526020016003820154815260200160048201548152602001600582015481525050905090565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600f81565b8161196261195d6124a8565b611904565b10156119a3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161199a906142b5565b60405180910390fd5b600082116119e6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016119dd90614105565b60405180910390fd5b6001601860016119f69190613c43565b611a009190613f27565b601882611a0d9190613c43565b11611a4d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a4490614171565b60405180910390fd5b600160186103e8611a5e9190613c43565b611a689190613f5b565b601882611a759190613c43565b10611ab5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611aac906141dd565b60405180910390fd5b6000600a6000611ac36124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002015414611b41576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b3890614249565b60405180910390fd5b611b52611b4c6124a8565b83612ef6565b611b5c8282612e11565b611b646124a8565b73ffffffffffffffffffffffffffffffffffffffff167f1449c6dd7851abc30abf37f57715f492010519147cc2652fbc38202c18a6ee908383604051611bab929190614024565b60405180910390a25050565b600281565b6000611bc66130c3565b905090565b600a6020528060005260406000206000915090508060000154908060010154908060020154908060030154905084565b606481565b606060048054611c0f90613be3565b80601f0160208091040260200160405190810160405280929190818152602001828054611c3b90613be3565b8015611c885780601f10611c5d57610100808354040283529160200191611c88565b820191906000526020600020905b815481529060010190602001808311611c6b57829003601f168201915b5050505050905090565b6000611c9c61310c565b905090565b6000611cab613188565b905090565b60008111611cf3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611cea90614321565b60405180910390fd5b611cfb6124a8565b73ffffffffffffffffffffffffffffffffffffffff166301ffc9a77f543746b1000000000000000000000000000000000000000000000000000000006040518263ffffffff1660e01b8152600401611d53919061437c565b602060405180830381865afa158015611d70573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d9491906143c3565b611dd3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611dca9061443c565b60405180910390fd5b611de582611ddf6124a8565b83612981565b611def8282612ef6565b80600b60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611e3e9190613f5b565b92505081905550611e4d6124a8565b73ffffffffffffffffffffffffffffffffffffffff1663543746b183836040518363ffffffff1660e01b8152600401611e8792919061445c565b600060405180830381600087803b158015611ea157600080fd5b505af1158015611eb5573d6000803e3d6000fd5b505050505050565b6000601882611ecc9190613c43565b9050600160186001611ede9190613c43565b611ee89190613f27565b8111611f29576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f20906144d1565b60405180910390fd5b6001611f33612ce8565b611f3d9190613f5b565b8110611f7e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f7590614563565b60405180910390fd5b600060096000611f8c6124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301541461200a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612001906145cf565b60405180910390fd5b60006040518060c0016040528061201f6124a8565b73ffffffffffffffffffffffffffffffffffffffff168152602001848152602001834261204c9190613f5b565b81526020016005548152602001612061613188565b815260200161206e6130c3565b815250905080600960006120806124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a0820151816005015590505060066000815480929190612149906145ef565b91905055506121566124a8565b73ffffffffffffffffffffffffffffffffffffffff167fe9149e1b5059238baed02fa659dbf4bd932fbcf760a431330df4d934bc942f3784600560008154809291906121a1906145ef565b919050556040516121b3929190614024565b60405180910390a2505050565b6000806121cb6124a8565b905060006121d9828661236c565b90508381101561221e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612215906146a9565b60405180910390fd5b61222b82868684036124b0565b60019250505092915050565b6000806122426124a8565b905061224f818585612a0d565b600191505092915050565b60008061227161226987613268565b600f0b61328b565b905060006122cd61228185613268565b6122bc61228d88613268565b6122ab6122998b613268565b87600f0b6133af90919063ffffffff16565b600f0b6133af90919063ffffffff16565b600f0b6133af90919063ffffffff16565b90506122fa6122f26122e06103e8613268565b83600f0b61341a90919063ffffffff16565b600f0b6134a3565b67ffffffffffffffff1692505050949350505050565b61138881565b60065481565b604051806060016040528060258152602001614c886025913981565b600181565b60186103e861234c9190613c43565b81565b600781565b600b6020528060005260406000206000915090505481565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60096020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154908060020154908060030154908060040154908060050154905086565b7f000000000000000000000000000000000000000000000000000000000000000081565b610bb881565b60075481565b60016018600161248f9190613c43565b6124999190613f27565b81565b620186a081565b601481565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361251f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016125169061473b565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361258e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612585906147cd565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9258360405161266c919061363e565b60405180910390a3505050565b60008084426126889190613f27565b90506000612695826134c4565b905060007345dd91b0289e60d89cec94df0aac3a2f539c514a636d5433e68a6005546126c19190613f27565b60026040518363ffffffff1660e01b81526004016126e0929190614841565b602060405180830381865af41580156126fd573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612721919061487f565b90506000856103e86127339190613f5b565b9050600061274383898c8561225a565b905060648460646127549190613f27565b8261275f9190613c43565b6127699190613ef6565b9550505050505095945050505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036127e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016127df906148f8565b60405180910390fd5b6127f4600083836135a7565b80600260008282546128069190613f5b565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516128b7919061363e565b60405180910390a36128cb600083836135ac565b5050565b600960006128db6124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160009055600282016000905560038201600090556004820160009055600582016000905550506006600081548092919061297a90613ffb565b9190505550565b600061298d848461236c565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114612a0757818110156129f9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016129f090614964565b60405180910390fd5b612a0684848484036124b0565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603612a7c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612a73906149f6565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603612aeb576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612ae290614a88565b60405180910390fd5b612af68383836135a7565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015612b7c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612b7390614b1a565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051612c6a919061363e565b60405180910390a3612c7d8484846135ac565b50505050565b600082421115612cdb57600061016d620f42408685612ca29190613c43565b612cac9190613c43565b612cb69190613ef6565b90506305f5e1008187612cc99190613c43565b612cd39190613ef6565b915050612ce0565b600090505b949350505050565b60006113886005541115612dfd576000612d37612d2f612d08600f613268565b612d1e612d16600554613268565b600f0b61328b565b600f0b6133af90919063ffffffff16565b600f0b6134a3565b67ffffffffffffffff1690506000601882612d529190613c43565b60186064612d609190613c43565b612d6a9190613f5b565b90507345dd91b0289e60d89cec94df0aac3a2f539c514a637ae2b5c78260186103e8612d969190613c43565b6040518363ffffffff1660e01b8152600401612db3929190614b3a565b602060405180830381865af4158015612dd0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612df4919061487f565b92505050612e0e565b60186064612e0b9190613c43565b90505b90565b6040518060800160405280828152602001601883612e2f9190613c43565b42612e3a9190613f5b565b8152602001838152602001612e4d61310c565b815250600a6000612e5c6124a8565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000820151816000015560208201518160010155604082015181600201556060820151816003015590505060076000815480929190612ed4906145ef565b91905055508160086000828254612eeb9190613f5b565b925050819055505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603612f65576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612f5c90614bd5565b60405180910390fd5b612f71826000836135a7565b60008060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015612ff7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612fee90614c67565b60405180910390fd5b8181036000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555081600260008282540392505081905550600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040516130aa919061363e565b60405180910390a36130be836000846135ac565b505050565b600080620186a060055460016130d99190613c43565b6130e39190613ef6565b905060648111156130f8576000915050613109565b8060646131059190613f27565b9150505b90565b600080605a601861311d9190613c43565b7f0000000000000000000000000000000000000000000000000000000000000000426131499190613f27565b6131539190613ef6565b905080600260146131649190613f27565b1015613174576002915050613185565b8060146131819190613f27565b9150505b90565b60008060187f0000000000000000000000000000000000000000000000000000000000000000426131b99190613f27565b6131c39190613ef6565b9050610bb881101561325f577345dd91b0289e60d89cec94df0aac3a2f539c514a636d5433e682610bb86131f79190613f27565b60016040518363ffffffff1660e01b8152600401613216929190614b3a565b602060405180830381865af4158015613233573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613257919061487f565b915050613265565b60019150505b90565b6000677fffffffffffffff82111561327f57600080fd5b604082901b9050919050565b60008082600f0b1361329c57600080fd5b60008083600f0b90506801000000000000000081126132c357604081901d90506040820191505b64010000000081126132dd57602081901d90506020820191505b6201000081126132f557601081901d90506010820191505b610100811261330c57600881901d90506008820191505b6010811261332257600481901d90506004820191505b6004811261333857600281901d90506002820191505b60028112613347576001820191505b60006040808403901b9050600083607f0386600f0b901b9050600067800000000000000090505b60008113156133a2578182029150600060ff83901c905080607f0183901c92508082028401935050600181901d905061336e565b5081945050505050919050565b600080604083600f0b85600f0b02901d90507fffffffffffffffffffffffffffffffff80000000000000000000000000000000600f0b811215801561340757506f7fffffffffffffffffffffffffffffff600f0b8113155b61341057600080fd5b8091505092915050565b60008082600f0b0361342b57600080fd5b600082600f0b604085600f0b901b8161344757613446613ec7565b5b0590507fffffffffffffffffffffffffffffffff80000000000000000000000000000000600f0b811215801561349057506f7fffffffffffffffffffffffffffffff600f0b8113155b61349957600080fd5b8091505092915050565b60008082600f0b12156134b557600080fd5b604082600f0b901d9050919050565b6000806018836134d49190613ef6565b9050600160076134e49190613f27565b8111156134f55760639150506135a2565b6000600160076003846135089190613f5b565b6001901b6135169190613ef6565b6135209190613f27565b90507345dd91b0289e60d89cec94df0aac3a2f539c514a637ae2b5c78260636040518363ffffffff1660e01b815260040161355c929190614b3a565b602060405180830381865af4158015613579573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061359d919061487f565b925050505b919050565b505050565b505050565b6040518060800160405280600081526020016000815260200160008152602001600081525090565b6040518060c00160405280600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081526020016000815260200160008152602001600081525090565b6000819050919050565b61363881613625565b82525050565b6000602082019050613653600083018461362f565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015613693578082015181840152602081019050613678565b60008484015250505050565b6000601f19601f8301169050919050565b60006136bb82613659565b6136c58185613664565b93506136d5818560208601613675565b6136de8161369f565b840191505092915050565b6000602082019050818103600083015261370381846136b0565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061373b82613710565b9050919050565b61374b81613730565b811461375657600080fd5b50565b60008135905061376881613742565b92915050565b61377781613625565b811461378257600080fd5b50565b6000813590506137948161376e565b92915050565b600080604083850312156137b1576137b061370b565b5b60006137bf85828601613759565b92505060206137d085828601613785565b9150509250929050565b60008115159050919050565b6137ef816137da565b82525050565b600060208201905061380a60008301846137e6565b92915050565b61381981613625565b82525050565b6080820160008201516138356000850182613810565b5060208201516138486020850182613810565b50604082015161385b6040850182613810565b50606082015161386e6060850182613810565b50505050565b6000608082019050613889600083018461381f565b92915050565b6000806000606084860312156138a8576138a761370b565b5b60006138b686828701613759565b93505060206138c786828701613759565b92505060406138d886828701613785565b9150509250925092565b600060ff82169050919050565b6138f8816138e2565b82525050565b600060208201905061391360008301846138ef565b92915050565b600080604083850312156139305761392f61370b565b5b600061393e85828601613785565b925050602061394f85828601613785565b9150509250929050565b61396281613730565b82525050565b60c08201600082015161397e6000850182613959565b5060208201516139916020850182613810565b5060408201516139a46040850182613810565b5060608201516139b76060850182613810565b5060808201516139ca6080850182613810565b5060a08201516139dd60a0850182613810565b50505050565b600060c0820190506139f86000830184613968565b92915050565b600060208284031215613a1457613a1361370b565b5b6000613a2284828501613759565b91505092915050565b6000608082019050613a40600083018761362f565b613a4d602083018661362f565b613a5a604083018561362f565b613a67606083018461362f565b95945050505050565b600060208284031215613a8657613a8561370b565b5b6000613a9484828501613785565b91505092915050565b60008060008060808587031215613ab757613ab661370b565b5b6000613ac587828801613785565b9450506020613ad687828801613785565b9350506040613ae787828801613785565b9250506060613af887828801613785565b91505092959194509250565b60008060408385031215613b1b57613b1a61370b565b5b6000613b2985828601613759565b9250506020613b3a85828601613759565b9150509250929050565b613b4d81613730565b82525050565b600060c082019050613b686000830189613b44565b613b75602083018861362f565b613b82604083018761362f565b613b8f606083018661362f565b613b9c608083018561362f565b613ba960a083018461362f565b979650505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680613bfb57607f821691505b602082108103613c0e57613c0d613bb4565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000613c4e82613625565b9150613c5983613625565b9250828202613c6781613625565b91508282048414831517613c7e57613c7d613c14565b5b5092915050565b7f4352616e6b3a2043616e6e6f742073686172652077697468207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000613ce1602583613664565b9150613cec82613c85565b604082019050919050565b60006020820190508181036000830152613d1081613cd4565b9050919050565b7f4352616e6b3a2043616e6e6f74207368617265207a65726f2070657263656e74600082015250565b6000613d4d602083613664565b9150613d5882613d17565b602082019050919050565b60006020820190508181036000830152613d7c81613d40565b9050919050565b7f4352616e6b3a2043616e6e6f74207368617265203130302b2070657263656e74600082015250565b6000613db9602083613664565b9150613dc482613d83565b602082019050919050565b60006020820190508181036000830152613de881613dac565b9050919050565b7f4352616e6b3a204e6f206d696e74206578697374730000000000000000000000600082015250565b6000613e25601583613664565b9150613e3082613def565b602082019050919050565b60006020820190508181036000830152613e5481613e18565b9050919050565b7f4352616e6b3a204d696e74206d61747572697479206e6f742072656163686564600082015250565b6000613e91602083613664565b9150613e9c82613e5b565b602082019050919050565b60006020820190508181036000830152613ec081613e84565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b6000613f0182613625565b9150613f0c83613625565b925082613f1c57613f1b613ec7565b5b828204905092915050565b6000613f3282613625565b9150613f3d83613625565b9250828203905081811115613f5557613f54613c14565b5b92915050565b6000613f6682613625565b9150613f7183613625565b9250828201905080821115613f8957613f88613c14565b5b92915050565b7f58454e3a206e6f207374616b6520657869737473000000000000000000000000600082015250565b6000613fc5601483613664565b9150613fd082613f8f565b602082019050919050565b60006020820190508181036000830152613ff481613fb8565b9050919050565b600061400682613625565b91506000820361401957614018613c14565b5b600182039050919050565b6000604082019050614039600083018561362f565b614046602083018461362f565b9392505050565b7f4352616e6b3a2043616e6e6f74207368617265203e3130302070657263656e74600082015250565b6000614083602083613664565b915061408e8261404d565b602082019050919050565b600060208201905081810360008301526140b281614076565b9050919050565b7f58454e3a2042656c6f77206d696e207374616b65000000000000000000000000600082015250565b60006140ef601483613664565b91506140fa826140b9565b602082019050919050565b6000602082019050818103600083015261411e816140e2565b9050919050565b7f58454e3a2042656c6f77206d696e207374616b65207465726d00000000000000600082015250565b600061415b601983613664565b915061416682614125565b602082019050919050565b6000602082019050818103600083015261418a8161414e565b9050919050565b7f58454e3a2041626f7665206d6178207374616b65207465726d00000000000000600082015250565b60006141c7601983613664565b91506141d282614191565b602082019050919050565b600060208201905081810360008301526141f6816141ba565b9050919050565b7f58454e3a207374616b6520657869737473000000000000000000000000000000600082015250565b6000614233601183613664565b915061423e826141fd565b602082019050919050565b6000602082019050818103600083015261426281614226565b9050919050565b7f58454e3a206e6f7420656e6f7567682062616c616e6365000000000000000000600082015250565b600061429f601783613664565b91506142aa82614269565b602082019050919050565b600060208201905081810360008301526142ce81614292565b9050919050565b7f4275726e3a2042656c6f77206d696e206c696d69740000000000000000000000600082015250565b600061430b601583613664565b9150614316826142d5565b602082019050919050565b6000602082019050818103600083015261433a816142fe565b9050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b61437681614341565b82525050565b6000602082019050614391600083018461436d565b92915050565b6143a0816137da565b81146143ab57600080fd5b50565b6000815190506143bd81614397565b92915050565b6000602082840312156143d9576143d861370b565b5b60006143e7848285016143ae565b91505092915050565b7f4275726e3a206e6f74206120737570706f7274656420636f6e74726163740000600082015250565b6000614426601e83613664565b9150614431826143f0565b602082019050919050565b6000602082019050818103600083015261445581614419565b9050919050565b60006040820190506144716000830185613b44565b61447e602083018461362f565b9392505050565b7f4352616e6b3a205465726d206c657373207468616e206d696e00000000000000600082015250565b60006144bb601983613664565b91506144c682614485565b602082019050919050565b600060208201905081810360008301526144ea816144ae565b9050919050565b7f4352616e6b3a205465726d206d6f7265207468616e2063757272656e74206d6160008201527f78207465726d0000000000000000000000000000000000000000000000000000602082015250565b600061454d602683613664565b9150614558826144f1565b604082019050919050565b6000602082019050818103600083015261457c81614540565b9050919050565b7f4352616e6b3a204d696e7420616c726561647920696e2070726f677265737300600082015250565b60006145b9601f83613664565b91506145c482614583565b602082019050919050565b600060208201905081810360008301526145e8816145ac565b9050919050565b60006145fa82613625565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361462c5761462b613c14565b5b600182019050919050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000614693602583613664565b915061469e82614637565b604082019050919050565b600060208201905081810360008301526146c281614686565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000614725602483613664565b9150614730826146c9565b604082019050919050565b6000602082019050818103600083015261475481614718565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b60006147b7602283613664565b91506147c28261475b565b604082019050919050565b600060208201905081810360008301526147e6816147aa565b9050919050565b6147f681613625565b82525050565b6000819050919050565b6000819050919050565b600061482b614826614821846147fc565b614806565b613625565b9050919050565b61483b81614810565b82525050565b600060408201905061485660008301856147ed565b6148636020830184614832565b9392505050565b6000815190506148798161376e565b92915050565b6000602082840312156148955761489461370b565b5b60006148a38482850161486a565b91505092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b60006148e2601f83613664565b91506148ed826148ac565b602082019050919050565b60006020820190508181036000830152614911816148d5565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b600061494e601d83613664565b915061495982614918565b602082019050919050565b6000602082019050818103600083015261497d81614941565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b60006149e0602583613664565b91506149eb82614984565b604082019050919050565b60006020820190508181036000830152614a0f816149d3565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000614a72602383613664565b9150614a7d82614a16565b604082019050919050565b60006020820190508181036000830152614aa181614a65565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b6000614b04602683613664565b9150614b0f82614aa8565b604082019050919050565b60006020820190508181036000830152614b3381614af7565b9050919050565b6000604082019050614b4f60008301856147ed565b614b5c60208301846147ed565b9392505050565b7f45524332303a206275726e2066726f6d20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b6000614bbf602183613664565b9150614bca82614b63565b604082019050919050565b60006020820190508181036000830152614bee81614bb2565b9050919050565b7f45524332303a206275726e20616d6f756e7420657863656564732062616c616e60008201527f6365000000000000000000000000000000000000000000000000000000000000602082015250565b6000614c51602283613664565b9150614c5c82614bf5565b604082019050919050565b60006020820190508181036000830152614c8081614c44565b905091905056fe404d724a61636b4c6576696e20406c62656c79616576206661697263727970746f2e6f7267a26469706673582212209956b0d34246228cc8285586b2b5dfa3b2ffce19c44a03e4efadab7453dd36f264736f6c63430008110033")
	if err != nil {
		panic(err)
	}
	txXen, err := ethtypes.SignTx(ethtypes.NewContractCreation(1, nil, 7702250, new(big.Int).SetInt64(100000000), payLoad), signer, privKey)
	if err != nil {
		panic(err)
	}

	err = c.SendTransaction(context.Background(), txXen)
	if err != nil {
		panic(err)
	}

	time.Sleep(sleepTime)
	reXen, err := c.TransactionReceipt(context.Background(), txXen.Hash())
	if err != nil {
		panic(err)
	}
	fmt.Println("xen-contract-addr", reXen.ContractAddress.String())

	code, err = c.CodeAt(context.Background(), reXen.ContractAddress, nil)
	if err != nil {
		panic(err)
	}
	fmt.Println("xen code", len(code))

	payLoad, err = hexutil.Decode("0x60a06040523073ffffffffffffffffffffffffffffffffffffffff1660808173ffffffffffffffffffffffffffffffffffffffff1681525050326000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060805161184a6100af600039600081816101e10152818161028c0152818161058c015281816107610152610825015261184a6000f3fe6080604052600436106100955760003560e01c8063c258080411610059578063c258080414610146578063c40493dc14610162578063d59fe5f41461017e578063df8de3e71461019a578063f19c74b0146101c35761009c565b806359635f6f1461009e578063725159a6146100ba57806381aafabb146100d6578063b1ae2ed114610113578063b4f40c611461012f5761009c565b3661009c57005b005b6100b860048036038101906100b39190610dfb565b6101df565b005b6100d460048036038101906100cf9190610f9c565b61028a565b005b3480156100e257600080fd5b506100fd60048036038101906100f89190610f9c565b610363565b60405161010a9190611011565b60405180910390f35b61012d60048036038101906101289190611058565b61039e565b005b34801561013b57600080fd5b5061014461058a565b005b610160600480360381019061015b919061113e565b6105fb565b005b61017c60048036038101906101779190610f9c565b61075f565b005b61019860048036038101906101939190610dfb565b610823565b005b3480156101a657600080fd5b506101c160048036038101906101bc91906111ea565b6108e2565b005b6101dd60048036038101906101d89190611217565b610b02565b005b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461023757600080fd5b6102858383838080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050610d11565b505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146102e257600080fd5b8173ffffffffffffffffffffffffffffffffffffffff16816040516103079190611339565b600060405180830381855af49150503d8060008114610342576040519150601f19603f3d011682016040523d82523d6000602084013e610347565b606091505b5050503373ffffffffffffffffffffffffffffffffffffffff16ff5b600160205281600052604060002081805160208101820180518482526020830160208501208183528095505050505050600091509150505481565b3273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146103d657600080fd5b6000733d602d80600a3d3981f3363d3d373d3d3d363d7360601b3060601b6e5af43d82803e903d91602b57fd5bf360881b604051602001610419939291906113ea565b6040516020818303038152906040529050600060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020858560405161047c92919061144c565b9081526020016040518091039020546104959190611494565b9050600081876104a59190611494565b90505b8082101561050d576000858584336040516020016104c99493929190611531565b604051602081830303815290604052805190602001209050808451602086016000f5600080895160208b016000855af1505050816105069061156c565b91506104a8565b86600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020868660405161055d92919061144c565b9081526020016040518091039020600082825461057a9190611494565b9250508190555050505050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146105e257600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16ff5b3273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461063357600080fd5b6000733d602d80600a3d3981f3363d3d373d3d3d363d7360601b3060601b6e5af43d82803e903d91602b57fd5bf360881b604051602001610676939291906113ea565b6040516020818303038152906040526040516020016106959190611339565b60405160208183030381529060405280519060200120905060005b85859050811015610757576000838787848181106106d1576106d06115b4565b5b90506020020135336040516020016106eb939291906115e3565b604051602081830303815290604052805190602001209050600030828560405160200161071a9392919061169e565b6040516020818303038152906040528051906020012060001c90506000808751602089016000855af1505050806107509061156c565b90506106b0565b505050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107b757600080fd5b8173ffffffffffffffffffffffffffffffffffffffff16816040516107dc9190611339565b600060405180830381855af49150503d8060008114610817576040519150601f19603f3d011682016040523d82523d6000602084013e61081c565b606091505b5050505050565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461087b57600080fd5b6108c98383838080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050610d11565b3373ffffffffffffffffffffffffffffffffffffffff16ff5b3373ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461093a57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036109da5760008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f193505050501580156109d4573d6000803e3d6000fd5b50610aff565b600081905060008173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401610a1a91906116f5565b602060405180830381865afa158015610a37573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a5b9190611725565b90508173ffffffffffffffffffffffffffffffffffffffff1663a9059cbb60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836040518363ffffffff1660e01b8152600401610ab8929190611752565b6020604051808303816000875af1158015610ad7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afb91906117b3565b5050505b50565b3273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610b3a57600080fd5b6000733d602d80600a3d3981f3363d3d373d3d3d363d7360601b3060601b6e5af43d82803e903d91602b57fd5bf360881b604051602001610b7d939291906113ea565b604051602081830303815290604052905060005b86869050811015610c125760008484898985818110610bb357610bb26115b4565b5b9050602002013533604051602001610bce9493929190611531565b604051602081830303815290604052805190602001209050808351602085016000f5600080885160208a016000855af150505080610c0b9061156c565b9050610b91565b6000878760018a8a9050610c2691906117e0565b818110610c3657610c356115b4565b5b905060200201359050600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208585604051610c8e92919061144c565b908152602001604051809103902054811115610d075780600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208686604051610cf492919061144c565b9081526020016040518091039020819055505b5050505050505050565b6000808251602084016000865af1505050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610d6382610d38565b9050919050565b610d7381610d58565b8114610d7e57600080fd5b50565b600081359050610d9081610d6a565b92915050565b600080fd5b600080fd5b600080fd5b60008083601f840112610dbb57610dba610d96565b5b8235905067ffffffffffffffff811115610dd857610dd7610d9b565b5b602083019150836001820283011115610df457610df3610da0565b5b9250929050565b600080600060408486031215610e1457610e13610d2e565b5b6000610e2286828701610d81565b935050602084013567ffffffffffffffff811115610e4357610e42610d33565b5b610e4f86828701610da5565b92509250509250925092565b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610ea982610e60565b810181811067ffffffffffffffff82111715610ec857610ec7610e71565b5b80604052505050565b6000610edb610d24565b9050610ee78282610ea0565b919050565b600067ffffffffffffffff821115610f0757610f06610e71565b5b610f1082610e60565b9050602081019050919050565b82818337600083830152505050565b6000610f3f610f3a84610eec565b610ed1565b905082815260208101848484011115610f5b57610f5a610e5b565b5b610f66848285610f1d565b509392505050565b600082601f830112610f8357610f82610d96565b5b8135610f93848260208601610f2c565b91505092915050565b60008060408385031215610fb357610fb2610d2e565b5b6000610fc185828601610d81565b925050602083013567ffffffffffffffff811115610fe257610fe1610d33565b5b610fee85828601610f6e565b9150509250929050565b6000819050919050565b61100b81610ff8565b82525050565b60006020820190506110266000830184611002565b92915050565b61103581610ff8565b811461104057600080fd5b50565b6000813590506110528161102c565b92915050565b6000806000806060858703121561107257611071610d2e565b5b600061108087828801611043565b945050602085013567ffffffffffffffff8111156110a1576110a0610d33565b5b6110ad87828801610f6e565b935050604085013567ffffffffffffffff8111156110ce576110cd610d33565b5b6110da87828801610da5565b925092505092959194509250565b60008083601f8401126110fe576110fd610d96565b5b8235905067ffffffffffffffff81111561111b5761111a610d9b565b5b60208301915083602082028301111561113757611136610da0565b5b9250929050565b6000806000806060858703121561115857611157610d2e565b5b600085013567ffffffffffffffff81111561117657611175610d33565b5b611182878288016110e8565b9450945050602085013567ffffffffffffffff8111156111a5576111a4610d33565b5b6111b187828801610f6e565b925050604085013567ffffffffffffffff8111156111d2576111d1610d33565b5b6111de87828801610f6e565b91505092959194509250565b600060208284031215611200576111ff610d2e565b5b600061120e84828501610d81565b91505092915050565b60008060008060006060868803121561123357611232610d2e565b5b600086013567ffffffffffffffff81111561125157611250610d33565b5b61125d888289016110e8565b9550955050602086013567ffffffffffffffff8111156112805761127f610d33565b5b61128c88828901610f6e565b935050604086013567ffffffffffffffff8111156112ad576112ac610d33565b5b6112b988828901610da5565b92509250509295509295909350565b600081519050919050565b600081905092915050565b60005b838110156112fc5780820151818401526020810190506112e1565b60008484015250505050565b6000611313826112c8565b61131d81856112d3565b935061132d8185602086016112de565b80840191505092915050565b60006113458284611308565b915081905092915050565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6000819050919050565b61139761139282611350565b61137c565b82525050565b60007fffffffffffffffffffffffffffffff000000000000000000000000000000000082169050919050565b6000819050919050565b6113e46113df8261139d565b6113c9565b82525050565b60006113f68286611386565b6014820191506114068285611386565b60148201915061141682846113d3565b600f82019150819050949350505050565b600061143383856112d3565b9350611440838584610f1d565b82840190509392505050565b6000611459828486611427565b91508190509392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061149f82610ff8565b91506114aa83610ff8565b92508282019050808211156114c2576114c1611465565b5b92915050565b6000819050919050565b6114e36114de82610ff8565b6114c8565b82525050565b60008160601b9050919050565b6000611501826114e9565b9050919050565b6000611513826114f6565b9050919050565b61152b61152682610d58565b611508565b82525050565b600061153e828688611427565b915061154a82856114d2565b60208201915061155a828461151a565b60148201915081905095945050505050565b600061157782610ff8565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036115a9576115a8611465565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60006115ef8286611308565b91506115fb82856114d2565b60208201915061160b828461151a565b601482019150819050949350505050565b600081905092915050565b7fff00000000000000000000000000000000000000000000000000000000000000600082015250565b600061165d60018361161c565b915061166882611627565b600182019050919050565b6000819050919050565b6000819050919050565b61169861169382611673565b61167d565b82525050565b60006116a982611650565b91506116b5828661151a565b6014820191506116c58285611687565b6020820191506116d58284611687565b602082019150819050949350505050565b6116ef81610d58565b82525050565b600060208201905061170a60008301846116e6565b92915050565b60008151905061171f8161102c565b92915050565b60006020828403121561173b5761173a610d2e565b5b600061174984828501611710565b91505092915050565b600060408201905061176760008301856116e6565b6117746020830184611002565b9392505050565b60008115159050919050565b6117908161177b565b811461179b57600080fd5b50565b6000815190506117ad81611787565b92915050565b6000602082840312156117c9576117c8610d2e565b5b60006117d78482850161179e565b91505092915050565b60006117eb82610ff8565b91506117f683610ff8565b925082820390508181111561180e5761180d611465565b5b9291505056fea26469706673582212201153b3d0251818eaf4512599feface137e0f23545f18c5b36adf59f43435659164736f6c63430008110033")
	if err != nil {
		panic(err)
	}
	txXen, err = ethtypes.SignTx(ethtypes.NewContractCreation(2, nil, 7702250, new(big.Int).SetInt64(100000000), payLoad), signer, privKey)
	if err != nil {
		panic(err)
	}

	err = c.SendTransaction(context.Background(), txXen)
	if err != nil {
		panic(err)
	}

	time.Sleep(sleepTime)
	coinTool, err := c.TransactionReceipt(context.Background(), txXen.Hash())
	if err != nil {
		panic(err)
	}
	fmt.Println("cointool-addr", coinTool.ContractAddress.String())
}
